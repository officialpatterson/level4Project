{% include "application/head.html" %}
<div id="container">
    <div class="row">
        <div class="panel panel-default">
            <div class="panel-body">
                <h1>Overview</h1>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Entities your Tracking</h3>
                </div>
                <table class="table table-striped">
                    <tbody id="tracked-entities-body">
                        {%for e in entities%}
                        <tr><td><a href="/app/entity/?id={{e.id}}"></a>{{e.name}}</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Summary</h3>
                </div>
                <div class="panel-body" id="panel-summary">
                    
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Collection Growth</h3>
                </div>
                <div class="panel-body">
                    <p>Summary Graph over time</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">Miscellaneous Entities</h3>
                </div>
                <table class="table table-striped">
                    <tbody id="entities-body">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/static/application/chart.js"></script>
<script src="http://d3js.org/d3.v3.js"></script>
<script src="http://platform.twitter.com/widgets.js" charset="utf-8"></script>
<script>

function buildEntityList(data){
    for (i = 0; i < data.length; i++){
        row = "<tr><td><a href=\"/app/entity/?id="+data[i]+"\">"+data[i]+"</a></td></tr>";
        $("#entities-body").append(row);
    }
}
function buildPage(data){
    buildEntityList(data['entities'])
    $("#panel-summary").append("Size of Collection: "+data['size'])
}

$(document).ready(function(){
    url = "http://localhost:8888/entities/";
    $.getJSON(url,function(data) { buildPage(data);});
});
</script>
</body>
</html>
